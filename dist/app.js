!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t){e.exports=require("mini-promisify-googlecalendar")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("date-fns")},function(e,t,n){"use strict";n.r(t);n(4);var r=n(0),o=n(2),i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(o.endOfDay)(t);return new Promise(function(o,i){r.google.calendar("v3").events.list({auth:e,calendarId:"primary",timeMin:t,timeMax:n,singleEvents:!0,orderBy:"startTime"},function(e,t){if(e)return console.log("The API returned an error: ".concat(e)),void i(e);o(t.data.items)})})};n.d(t,"listEvents",function(){return i})},function(e,t){e.exports=require("@babel/polyfill")},function(e,t){e.exports=require("mini-openweathermap")},function(e,t){e.exports=require("dotenv")},function(e,t){e.exports=require("mini-promisify-googlecalendar/dist/atoms/google_calendar/OAuth/oauth_authorize")},function(e,t){e.exports=require("mini-googlecalendar-event")},function(e,t){e.exports=require("mini-google-home-notifier")},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(6),a=n.n(i).a.config({path:o.a.resolve(__dirname,"../",".env")});if(a.error)throw a.error;n(7).TOKEN_PATH=o.a.resolve(__dirname,"../",process.env.TOKEN_PATH);var c=n(0),u=n(8),s=n(5),l=n(9),f=n(3);function p(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.string=""}var t,n,r;return t=e,(n=[{key:"concatString",value:function(e){""!==e&&(this.string+="".concat(e,"\n"))}}])&&g(t.prototype,n),r&&g(t,r),e}(),d=process.env.OPEN_WEATHER_MAP_KEY,h=o.a.resolve(__dirname,"../",process.env.CLIENT_SECRET_PATH),m=process.env.GOOGLE_HOME_IP;try{!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;Object(c.fetchClientSecret)(e,"installed").then(function(e){return console.log("fetchClientSecret then"),Object(c.withAuthorize)(e).then(function(e){return console.log("before listEvents"),Object(f.listEvents)(e,(new Date).toISOString())}).catch(function(e){return console.log("can't not authorise these credeatials"),Promise.reject(e)})}).then((t=regeneratorRuntime.mark(function e(t){var n,r,o,i,a,c,f,p,g,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new v,r=new u.CalendarEventList(t,{language:"ja"}),o=r.concatEvents(t,function(e,t,n){var r=n?"".concat(n,"から，"):"",o=""!==t?"".concat(t,"で"):"";return"".concat(r).concat(o).concat(e,"\n")}),n.concatString(o),i=new s.OpenWeatherMapProxy(d,{city:"Hachioji,JP",lang:"ja"}),e.next=7,i.fetchCurrentWeather();case 7:return a=e.sent,c=new s.OpenWeatherMapForecastList(a),f=c.currentForecast,p=c.filterForecastsByDateTime(c.toDate(f.dt_txt)),g=c.changeForecasts(p),n.concatString("ただ今の天気は，".concat(f.weather[0].description,"で，気温は").concat(parseInt(f.main.temp,10),"度です．")),n.concatString("最高気温は, ".concat(parseInt(c.maxTemperature(p),10),"度，最低気温は").concat(parseInt(c.minTemperature(p),10),"度です．")),n.concatString(c.concatForecasts(g,function(e){var t=c.zonedTimeToUtc(e.dt_txt),n=c.parseTime(t),r=e.weather[0].description;return"".concat(n,"に").concat(r,"に変わります")})),g.some(function(e){return"Rain"===e.weather[0].main})&&n.concatString("雨が降るので，傘を持って行ったほうがいいでしょう"),console.log(n.string),h=new l.GoogleHomeNotifier(m,{language:"ja"}),e.next=21,h.speak(n.string);case 21:case"end":return e.stop()}},e,this)}),n=function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){p(i,r,o,a,c,"next",e)}function c(e){p(i,r,o,a,c,"throw",e)}a(void 0)})},function(e){return n.apply(this,arguments)})).catch(function(e){console.log("error"),console.log(e)});var t,n}()}catch(e){console.log(e)}}]);